<!DOCTYPE html>
<html>
<body>

<form id="query">
<table>
  <tr>
    <td colspan="5">Select:</td>
    <td colspan="3">Filter:</td>
    <td colspan="2">Match:</td>
  </tr>
  <tr>
    <td></td>
    <td>left in:<br></td>
    <td>left out:<br></td>
    <td>right in:<br></td>
    <td>right out:<br></td>
    <td></td>
    <td>min:</td>
    <td>max:</td>
    <td></td>
    <td>string:</td>
  </tr>
  <tr>
    <td>Chain:</td>
    <td><input type="text" id="match_first_chain" value=""><br></td>
    <td><input type="text" id="match_first_not_chain" value=""><br></td>
    <td><input type="text" id="match_second_chain" value=""><br></td>
    <td><input type="text" id="match_second_not_chain" value=""><br></td>
    <td>Contact area:</td>
    <td><input type="text" id="match_min_area" value=""><br></td>
    <td><input type="text" id="match_max_area" value=""><br></td>
    <td>Tags in:</td>
    <td><input type="text" id="match_tags" value=""><br></td>
  </tr>
  <tr>
    <td>Residue number:</td>
    <td><input type="text" id="match_first_residue_number" value=""><br></td>
    <td><input type="text" id="match_first_not_residue_number" value=""><br></td>
    <td><input type="text" id="match_second_residue_number" value=""><br></td>
    <td><input type="text" id="match_second_not_residue_number" value=""><br></td>
    <td>Minimal distance:</td>
    <td><input type="text" id="match_min_dist" value=""><br></td>
    <td><input type="text" id="match_max_dist" value=""><br></td>
    <td>Tags out:</td>
    <td><input type="text" id="match_tags_not" value=""><br></td>
  </tr>
  <tr>
    <td>Residue name:</td>
    <td><input type="text" id="match_first_residue_name" value=""><br></td>
    <td><input type="text" id="match_first_not_residue_name" value=""><br></td>
    <td><input type="text" id="match_second_residue_name" value=""><br></td>
    <td><input type="text" id="match_second_not_residue_name" value=""><br></td>
    <td>Sequence separation:</td>
    <td><input type="text" id="match_min_seq_sep" value=""><br></td>
    <td><input type="text" id="match_max_seq_sep" value=""><br></td>
    <td>Adjuncts in:</td>
    <td><input type="text" id="match_adjuncts" value=""><br></td>
  </tr>
  <tr>
    <td>Atom serial:</td>
    <td><input type="text" id="match_first_atom_serial" value=""><br></td>
    <td><input type="text" id="match_first_not_atom_serial" value=""><br></td>
    <td><input type="text" id="match_second_atom_serial" value=""><br></td>
    <td><input type="text" id="match_second_not_atom_serial" value=""><br></td>
    <td></td>
    <td></td>
    <td></td>
    <td>Adjuncts out:</td>
    <td><input type="text" id="match_adjuncts_not" value=""><br></td>
  </tr>
  <tr>
    <td>Atom name:</td>
    <td><input type="text" id="match_first_atom_name" value=""><br></td>
    <td><input type="text" id="match_first_not_atom_name" value=""><br></td>
    <td><input type="text" id="match_second_atom_name" value=""><br></td>
    <td><input type="text" id="match_second_not_atom_name" value=""><br></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table>
</form>

<p>
<button onclick="compose()">Compose</button>
</p>

<pre id="result"></pre>

<script>

function guarded_split(str)
{
	return str.split(/[\s,;]+/).join(',').replace(/^,+|,+$/gm,'');
}

function guarded_append(main, suffix, value)
{
	result=main;
	if(value)
	{
		if(result)
		{
			result+="&amp";
		}
		result+=suffix+"&lt"+value+"&gt";
	}
	return result;
}

function global_append(main, suffix, value)
{
	result=main;
	if(value)
	{
		if(result)
		{
			result+=" ";
		}
		result+=suffix+" '"+value+"'";
	}
	return result;
}

function compose()
{
	var output=""
	
	var output_match_first=""
	output_match_first=guarded_append(output_match_first, "c", guarded_split(document.getElementById("match_first_chain").value));
	output_match_first=guarded_append(output_match_first, "r", guarded_split(document.getElementById("match_first_residue_number").value));
	output_match_first=guarded_append(output_match_first, "a", guarded_split(document.getElementById("match_first_atom_serial").value));
	output_match_first=guarded_append(output_match_first, "R", guarded_split(document.getElementById("match_first_residue_name").value));
	output_match_first=guarded_append(output_match_first, "A", guarded_split(document.getElementById("match_first_atom_name").value));
	output=global_append(output, "--match-first", output_match_first);
	
	var output_match_first_not=""
	output_match_first_not=guarded_append(output_match_first_not, "c", guarded_split(document.getElementById("match_first_not_chain").value));
	output_match_first_not=guarded_append(output_match_first_not, "r", guarded_split(document.getElementById("match_first_not_residue_number").value));
	output_match_first_not=guarded_append(output_match_first_not, "a", guarded_split(document.getElementById("match_first_not_atom_serial").value));
	output_match_first_not=guarded_append(output_match_first_not, "R", guarded_split(document.getElementById("match_first_not_residue_name").value));
	output_match_first_not=guarded_append(output_match_first_not, "A", guarded_split(document.getElementById("match_first_not_atom_name").value));
	output=global_append(output, "--match-first-not", output_match_first_not);
	
	var output_match_second=""
	output_match_second=guarded_append(output_match_second, "c", guarded_split(document.getElementById("match_second_chain").value));
	output_match_second=guarded_append(output_match_second, "r", guarded_split(document.getElementById("match_second_residue_number").value));
	output_match_second=guarded_append(output_match_second, "a", guarded_split(document.getElementById("match_second_atom_serial").value));
	output_match_second=guarded_append(output_match_second, "R", guarded_split(document.getElementById("match_second_residue_name").value));
	output_match_second=guarded_append(output_match_second, "A", guarded_split(document.getElementById("match_second_atom_name").value));
	output=global_append(output, "--match-second", output_match_second);
	
	var output_match_second_not=""
	output_match_second_not=guarded_append(output_match_second_not, "c", guarded_split(document.getElementById("match_second_not_chain").value));
	output_match_second_not=guarded_append(output_match_second_not, "r", guarded_split(document.getElementById("match_second_not_residue_number").value));
	output_match_second_not=guarded_append(output_match_second_not, "a", guarded_split(document.getElementById("match_second_not_atom_serial").value));
	output_match_second_not=guarded_append(output_match_second_not, "R", guarded_split(document.getElementById("match_second_not_residue_name").value));
	output_match_second_not=guarded_append(output_match_second_not, "A", guarded_split(document.getElementById("match_second_not_atom_name").value));
	output=global_append(output, "--match-second-not", output_match_second_not);

	document.getElementById("result").innerHTML=output;
}

</script>

</body>
</html>

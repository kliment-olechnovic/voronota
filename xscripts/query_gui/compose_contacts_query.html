<!DOCTYPE html>
<html>
<body>

<form id="query">
<table>
  <tr>
    <td colspan="5">Select:</td>
    <td colspan="3">Filter:</td>
    <td colspan="2">Match:</td>
  </tr>
  <tr>
    <td></td>
    <td>left in:<br></td>
    <td>left out:<br></td>
    <td>right in:<br></td>
    <td>right out:<br></td>
    <td></td>
    <td>min:</td>
    <td>max:</td>
    <td></td>
    <td>string:</td>
  </tr>
  <tr>
    <td>Chain:</td>
    <td><input type="text" id="match_first_chain" value=""><br></td>
    <td><input type="text" id="match_first_not_chain" value=""><br></td>
    <td><input type="text" id="match_second_chain" value=""><br></td>
    <td><input type="text" id="match_second_not_chain" value=""><br></td>
    <td>Contact area:</td>
    <td><input type="text" id="match_min_area" value=""><br></td>
    <td><input type="text" id="match_max_area" value=""><br></td>
    <td>Tags in:</td>
    <td><input type="text" id="match_tags" value=""><br></td>
  </tr>
  <tr>
    <td>Residue number:</td>
    <td><input type="text" id="match_first_residue_number" value=""><br></td>
    <td><input type="text" id="match_first_not_residue_number" value=""><br></td>
    <td><input type="text" id="match_second_residue_number" value=""><br></td>
    <td><input type="text" id="match_second_not_residue_number" value=""><br></td>
    <td>Minimal distance:</td>
    <td><input type="text" id="match_min_dist" value=""><br></td>
    <td><input type="text" id="match_max_dist" value=""><br></td>
    <td>Tags out:</td>
    <td><input type="text" id="match_tags_not" value=""><br></td>
  </tr>
  <tr>
    <td>Residue name:</td>
    <td><input type="text" id="match_first_residue_name" value=""><br></td>
    <td><input type="text" id="match_first_not_residue_name" value=""><br></td>
    <td><input type="text" id="match_second_residue_name" value=""><br></td>
    <td><input type="text" id="match_second_not_residue_name" value=""><br></td>
    <td>Sequence separation:</td>
    <td><input type="text" id="match_min_seq_sep" value=""><br></td>
    <td><input type="text" id="match_max_seq_sep" value=""><br></td>
    <td>Adjuncts in:</td>
    <td><input type="text" id="match_adjuncts" value=""><br></td>
  </tr>
  <tr>
    <td>Atom serial:</td>
    <td><input type="text" id="match_first_atom_serial" value=""><br></td>
    <td><input type="text" id="match_first_not_atom_serial" value=""><br></td>
    <td><input type="text" id="match_second_atom_serial" value=""><br></td>
    <td><input type="text" id="match_second_not_atom_serial" value=""><br></td>
    <td></td>
    <td></td>
    <td></td>
    <td>Adjuncts out:</td>
    <td><input type="text" id="match_adjuncts_not" value=""><br></td>
  </tr>
  <tr>
    <td>Atom name:</td>
    <td><input type="text" id="match_first_atom_name" value=""><br></td>
    <td><input type="text" id="match_first_not_atom_name" value=""><br></td>
    <td><input type="text" id="match_second_atom_name" value=""><br></td>
    <td><input type="text" id="match_second_not_atom_name" value=""><br></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table>
</form>

<p>
<button onclick="compose()">Compose</button>
</p>

<pre id="result"></pre>

<script>

function get_input_generic_value(str)
{
	return str.split(/[\s,;]+/).join(',').replace(/^,+|,+$/gm,'');
}

function get_input_float_value(str)
{
	if(isNaN(str))
	{
		return "";
	}
	else
	{
		return parseFloat(str);
	}
}

function get_input_int_value(str)
{
	if(isNaN(str))
	{
		return "";
	}
	else
	{
		return parseInt(str);
	}
}

function get_input_logical_value(str)
{
	return str.split(/[\s,;]+/).join('&').replace(/&+/gm,'&').replace(/&\|/gm,'|').replace(/\|&/gm,'|').replace(/\|+/gm,'|').replace(/^&+|&+$/gm,'').replace(/^\|+|\|+$/gm,'');
}

function append_to_local_output(main, suffix, value)
{
	result=main;
	if(value)
	{
		if(result)
		{
			result+="&amp";
		}
		result+=suffix+"&lt"+value+"&gt";
	}
	return result;
}

function append_to_global_output(main, suffix, value)
{
	result=main;
	if(value)
	{
		if(result)
		{
			result+=" ";
		}
		result+=suffix+" '"+value+"'";
	}
	return result;
}

function compose()
{
	var output=""
	
	var output_match_first=""
	output_match_first=append_to_local_output(output_match_first, "c", get_input_generic_value(document.getElementById("match_first_chain").value));
	output_match_first=append_to_local_output(output_match_first, "r", get_input_generic_value(document.getElementById("match_first_residue_number").value));
	output_match_first=append_to_local_output(output_match_first, "a", get_input_generic_value(document.getElementById("match_first_atom_serial").value));
	output_match_first=append_to_local_output(output_match_first, "R", get_input_generic_value(document.getElementById("match_first_residue_name").value));
	output_match_first=append_to_local_output(output_match_first, "A", get_input_generic_value(document.getElementById("match_first_atom_name").value));
	output=append_to_global_output(output, "--match-first", output_match_first);
	
	var output_match_first_not=""
	output_match_first_not=append_to_local_output(output_match_first_not, "c", get_input_generic_value(document.getElementById("match_first_not_chain").value));
	output_match_first_not=append_to_local_output(output_match_first_not, "r", get_input_generic_value(document.getElementById("match_first_not_residue_number").value));
	output_match_first_not=append_to_local_output(output_match_first_not, "a", get_input_generic_value(document.getElementById("match_first_not_atom_serial").value));
	output_match_first_not=append_to_local_output(output_match_first_not, "R", get_input_generic_value(document.getElementById("match_first_not_residue_name").value));
	output_match_first_not=append_to_local_output(output_match_first_not, "A", get_input_generic_value(document.getElementById("match_first_not_atom_name").value));
	output=append_to_global_output(output, "--match-first-not", output_match_first_not);
	
	var output_match_second=""
	output_match_second=append_to_local_output(output_match_second, "c", get_input_generic_value(document.getElementById("match_second_chain").value));
	output_match_second=append_to_local_output(output_match_second, "r", get_input_generic_value(document.getElementById("match_second_residue_number").value));
	output_match_second=append_to_local_output(output_match_second, "a", get_input_generic_value(document.getElementById("match_second_atom_serial").value));
	output_match_second=append_to_local_output(output_match_second, "R", get_input_generic_value(document.getElementById("match_second_residue_name").value));
	output_match_second=append_to_local_output(output_match_second, "A", get_input_generic_value(document.getElementById("match_second_atom_name").value));
	output=append_to_global_output(output, "--match-second", output_match_second);
	
	var output_match_second_not=""
	output_match_second_not=append_to_local_output(output_match_second_not, "c", get_input_generic_value(document.getElementById("match_second_not_chain").value));
	output_match_second_not=append_to_local_output(output_match_second_not, "r", get_input_generic_value(document.getElementById("match_second_not_residue_number").value));
	output_match_second_not=append_to_local_output(output_match_second_not, "a", get_input_generic_value(document.getElementById("match_second_not_atom_serial").value));
	output_match_second_not=append_to_local_output(output_match_second_not, "R", get_input_generic_value(document.getElementById("match_second_not_residue_name").value));
	output_match_second_not=append_to_local_output(output_match_second_not, "A", get_input_generic_value(document.getElementById("match_second_not_atom_name").value));
	output=append_to_global_output(output, "--match-second-not", output_match_second_not);
	
	output=append_to_global_output(output, "--match-min-area", get_input_float_value(document.getElementById("match_min_area").value));
	output=append_to_global_output(output, "--match-max-area", get_input_float_value(document.getElementById("match_max_area").value));
	
	output=append_to_global_output(output, "--match-min-dist", get_input_float_value(document.getElementById("match_min_dist").value));
	output=append_to_global_output(output, "--match-max-dist", get_input_float_value(document.getElementById("match_max_dist").value));
	
	output=append_to_global_output(output, "--match-min-seq-sep", get_input_int_value(document.getElementById("match_min_seq_sep").value));
	output=append_to_global_output(output, "--match-max-seq-sep", get_input_int_value(document.getElementById("match_max_seq_sep").value));
	
	output=append_to_global_output(output, "--match-tags", get_input_logical_value(document.getElementById("match_tags").value));
	output=append_to_global_output(output, "--match-tags-not", get_input_logical_value(document.getElementById("match_tags_not").value));

	document.getElementById("result").innerHTML=output;
}

</script>

</body>
</html>

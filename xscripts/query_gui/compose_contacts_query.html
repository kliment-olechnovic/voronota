<!DOCTYPE html>
<html>
<body>

<form id="query">
<table>
  <tr>
    <th colspan="5">Select:</th>
    <th colspan="3">Filter:</th>
    <th colspan="2">Match:</th>
  </tr>
  <tr>
    <td></td>
    <td>left in:<br></td>
    <td>left out:<br></td>
    <td>right in:<br></td>
    <td>right out:<br></td>
    <td></td>
    <td>min:</td>
    <td>max:</td>
    <td></td>
    <td>string:</td>
  </tr>
  <tr>
    <td>Chain:</td>
    <td><input type="text" id="match_first_chain" value=""><br></td>
    <td><input type="text" id="match_first_not_chain" value=""><br></td>
    <td><input type="text" id="match_secong_chain" value=""><br></td>
    <td><input type="text" id="match_second_not_chain" value=""><br></td>
    <td>Contact area:</td>
    <td><input type="text" id="match_min_area" value=""><br></td>
    <td><input type="text" id="match_max_area" value=""><br></td>
    <td>Tags in:</td>
    <td><input type="text" id="match_tags" value=""><br></td>
  </tr>
  <tr>
    <td>Residue number:</td>
    <td><input type="text" id="match_first_residue_number" value=""><br></td>
    <td><input type="text" id="match_first_not_residue_number" value=""><br></td>
    <td><input type="text" id="match_secong_residue_number" value=""><br></td>
    <td><input type="text" id="match_second_not_residue_number" value=""><br></td>
    <td>Minimal distance:</td>
    <td><input type="text" id="match_min_dist" value=""><br></td>
    <td><input type="text" id="match_max_dist" value=""><br></td>
    <td>Tags out:</td>
    <td><input type="text" id="match_tags_not" value=""><br></td>
  </tr>
  <tr>
    <td>Residue name:</td>
    <td><input type="text" id="match_first_residue_name" value=""><br></td>
    <td><input type="text" id="match_first_not_residue_name" value=""><br></td>
    <td><input type="text" id="match_secong_residue_name" value=""><br></td>
    <td><input type="text" id="match_second_not_residue_name" value=""><br></td>
    <td>Sequence separation:</td>
    <td><input type="text" id="match_min_seq_sep" value=""><br></td>
    <td><input type="text" id="match_max_seq_sep" value=""><br></td>
    <td>Adjuncts in:</td>
    <td><input type="text" id="match_adjuncts" value=""><br></td>
  </tr>
  <tr>
    <td>Atom serial:</td>
    <td><input type="text" id="match_first_atom_serial" value=""><br></td>
    <td><input type="text" id="match_first_not_atom_serial" value=""><br></td>
    <td><input type="text" id="match_secong_atom_serial" value=""><br></td>
    <td><input type="text" id="match_second_not_atom_serial" value=""><br></td>
    <td></td>
    <td></td>
    <td></td>
    <td>Adjuncts out:</td>
    <td><input type="text" id="match_adjuncts_not" value=""><br></td>
  </tr>
  <tr>
    <td>Atom name:</td>
    <td><input type="text" id="match_first_atom_name" value=""><br></td>
    <td><input type="text" id="match_first_not_atom_name" value=""><br></td>
    <td><input type="text" id="match_secong_atom_name" value=""><br></td>
    <td><input type="text" id="match_second_not_atom_name" value=""><br></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table>
</form>

<p>
<button onclick="compose()">Compose</button>
</p>

<p id="result"></p>

<script>

function guarded_split(str)
{
	return str.split(/[\s,;]+/).join(',').replace(/^,+|,+$/gm,'');
}

function guarded_append(start, suffix, value)
{
	result=start;
	if(value)
	{
		if(result)
		{
			result+="&amp";
		}
		result+=suffix+"&lt"+value+"&gt";
	}
	return result;
}

function compose()
{
	var output=""
	
	var output_match_first=""
	output_match_first=guarded_append(output_match_first, "c", guarded_split(document.getElementById("match_first_chain").value));
	output_match_first=guarded_append(output_match_first, "r", guarded_split(document.getElementById("match_first_residue_number").value));
	output_match_first=guarded_append(output_match_first, "a", guarded_split(document.getElementById("match_first_atom_serial").value));
	output_match_first=guarded_append(output_match_first, "R", guarded_split(document.getElementById("match_first_residue_name").value));
	output_match_first=guarded_append(output_match_first, "A", guarded_split(document.getElementById("match_first_atom_name").value));
	if(output_match_first)
	{
		output+=" --match-first '"+output_match_first+"'";
	}

	document.getElementById("result").innerHTML=output;
}

</script>

</body>
</html>
